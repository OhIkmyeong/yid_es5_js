<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2-1 ìˆ˜ì§‘í•˜ê¸° map values pluck</title>
</head>
<body>
<script>
    /* ì»¬ë ‰ì…˜ ì¤‘ì‹¬ í”„ë¡œê·¸ë˜ë°ì˜ 4ê°€ì§€ ìœ í˜•ê³¼ í•¨ìˆ˜ */
    //ì»¬ë ‰ì…˜ ì€ array ê°™ì€ê±°...
    //ëŒ€í‘œì ìœ¼ë¡œ map, filter, find, reduce

    const users = [
        {id:10, name:'Din Djarin', age:38},
        {id:20, name:'Luke Skywalker', age:28},
        {id:30, name:'Grogu', age:50},
        {id:40, name:'Kara Dune', age:31},
        {id:50, name:'Grigg Karga', age:53},
        {id:60, name:'Boba Fett', age:55},
        {id:70, name:'Moira O\'Deorain', age:48},
        {id:80, name:'Siebren De Kuiper', age:62},
        {id:90, name:'Gabriel Reyes', age:52},
        {id:100, name:'Rena Oxton', age:26},
        {id:110, name:'ì¼ë¯¼', age:12},
    ];

    function _is_object(obj){return typeof obj == 'object' && !!obj;}
    function _keys(obj){return _is_object(obj) ? Object.keys(obj) : [];}
    function _rest(list,num){
        const _slice = Array.prototype.slice;
        return _slice.call(list,num ?? 1);
    }//_rest

    function _each(list,iter){
        const keys = _keys(list);
        for(let i=0, len = keys.length; i<len; i++){
            iter(list[keys[i]]);
        }
        return list;
    }//_each
    
    function _map(list,mapper){
        const result = [];
        _each(list,function(item){
            result.push(mapper(item));
        });
        return result;
    }//_map

    function _filter(list,predi){
        const result = [];

        _each(list, function(item){
            if(predi(item)){result.push(item);}
        });

        return result;
    }//_filter

    function _reduce(list,iter,memo){
        if(arguments.length == 2){
            memo = list[0];
            list = _rest(list);}

        _each(list, function(val){
            memo = iter(memo, val);
        });

        return memo;
    }//_reduce

    function _curryr(fn){
        return function(a,b){
            return arguments.length == 2 ? fn(a,b) : function(b){return fn(b,a);}
        }
    }//_curryr

    /* ğŸš© 1. ìˆ˜ì§‘í•˜ê¸° - map, values, pluck ë“± */
    //1-0. _map
    console.log('_map : ',_map(users, user => user.name));

    //ğŸ‘1-1. _values
    function _values(data){
        return _map(data, _identity);
    }//_values

    console.log('_keys : ',_keys(users[0]));
    console.log('_values : ', _values(users[0]));

    //valuesëŠ” identityë€ í•¨ìˆ˜ë¥¼ í•©ì„±í•´ì„œ ì“¸ ìˆ˜ë„ ìˆë‹¤.
    //ì´ê±¸ ì™€ ì“°ëŠ”ê²ƒì„..?ã…‹ã…‹
    function _identity(val){return val;}//_identity

    //curryr ë¡œ ë” ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ë„ ìˆìŒ
    const __map = _curryr(_map);
    const __values = __map(_identity);
    console.log('__values : ',__values(users[1]));

    //ğŸ‘1-2. _pluck
    function _pluck(data, key){
        return _map(data, obj=>obj[key]);
    }//_pluck

    console.log('_pluck : ',_pluck(users, 'age'));

    //_getrë¡œ ë” ê°„ë‹¨í•˜ê²Œ
    const _getr = _curryr(function(obj,key){
        return !obj ? undefined : obj[key];
    });

    function __pluck(data,key){
        return _map(data, _getr(key));
    }//__pluck

    console.log('__pluck : ', __pluck(users, 'name'));

    /* ğŸš© 2. ê±°ë¥´ê¸° - filter, reject, compact, without ë“± */
    /* ğŸš© 3. ì°¾ì•„ë‚´ê¸° - find, some, every ë“± */
    /* ğŸš© 4. ì ‘ê¸°(ì¶•ì•½) - reduce, min, max, group_by, count_by ë“± */
</script>
</body>
</html>